{"ast":null,"code":"import _classCallCheck from\"G:\\\\JS\\\\goring_wind\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"G:\\\\JS\\\\goring_wind\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"G:\\\\JS\\\\goring_wind\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"G:\\\\JS\\\\goring_wind\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"G:\\\\JS\\\\goring_wind\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import'./HomeContent.css';import InteractiveWeather from'./InteractiveWeather';import WindCard from'./WindCard';import TideCard from'./TideCard';import Failure from'../Failure';// not used yet\n// import GenericDialog from '../../modals/genericDialog';\nvar HomeContent=/*#__PURE__*/function(_Component){_inherits(HomeContent,_Component);function HomeContent(props){var _this;_classCallCheck(this,HomeContent);_this=_possibleConstructorReturn(this,_getPrototypeOf(HomeContent).call(this,props));_this.state={wind:null,isLoaded:null,tide:null,failure:{display:\"false\",message:\"\",code:\"\"}};return _this;}_createClass(HomeContent,[{key:\"displayError\",value:function displayError(code,message,time){var _this2=this;this.setState({failure:{display:\"true\",code:code,message:message}});setTimeout(function(){_this2.setState({failure:{display:\"false\"}});},time);}},{key:\"componentDidMount\",value:function componentDidMount(){this.displayError(\"0x00\",\"Any data presented is false during the development phase of this, do not use it for justification for kitesurfing\",3000);this.getTideData();this.getWindData();// auto refress wind data\nsetInterval(this.getWindData.bind(this),5000);}},{key:\"getWindData\",value:function getWindData(){var _this3=this;var t_wind=[];var xhr=new XMLHttpRequest();xhr.onload=function(){if(xhr.status===200){var data=JSON.parse(xhr.response);data=data.res;for(var i=0;i<data.length;i++){t_wind.push({name:data[i].name,location:data[i].location,distance:data[i].distance,speed:data[i].speed,direction:data[i].direction,bearing:data[i].bearing,position:[data[i].lat,data[i].long],key:data[i].key});}_this3.setState({wind:t_wind,isLoaded:true});}else{// failed\n_this3.displayError(\"0x01\",\"failed to retrieve wind data\",5000);}};xhr.open('POST','http://192.168.1.3:5000/weather/getCurrent?type=wind');xhr.send();}},{key:\"getTideData\",value:function getTideData(){var _this4=this;var t_tide=[];var xhr=new XMLHttpRequest();xhr.onload=function(){if(xhr.status===200){var data=JSON.parse(xhr.response);data=data.res;console.log(\"tide\");console.log(data);_this4.setState({tide:data});}else{// failed\n_this4.displayError(\"0x01\",\"failed to retrieve tide data\",5000);console.log(\"tide failed\");}};xhr.open('POST','http://192.168.1.3:5000/weather/getCurrent?type=tide');xhr.send();}},{key:\"render\",value:function render(){if(this.state.isLoaded){var _this$state=this.state,wind=_this$state.wind,tide=_this$state.tide;var Cards=wind.map(function(row){return React.createElement(WindCard,{StationName:row.name,StationLocation:row.location,StationDistance:row.distance,CurrentSpeed:row.speed,Direction:row.direction,Bearing:row.bearing,key:row.key});});return React.createElement(\"main\",{id:\"layout-container\"},React.createElement(Failure,{display:this.state.failure.display,code:this.state.failure.code,message:this.state.failure.message}),React.createElement(\"div\",{id:\"content\"},React.createElement(\"div\",{className:\"grid-container content-container\"},React.createElement(\"div\",{className:\"grid-card\"},React.createElement(\"div\",{className:\"full-size\"},React.createElement(\"span\",{className:\"card-title\"},\"INTERACTIVE WEATHER\"),React.createElement(\"div\",{className:\"colour-card blue pale-blue-shadow full-size\"},React.createElement(InteractiveWeather,{wind:this.state.wind})))),React.createElement(\"div\",{className:\"grid-card\"},React.createElement(\"div\",{className:\"left-padding full-size\"},React.createElement(\"span\",{className:\"card-title\"},\"WIND\"),React.createElement(\"div\",{className:\"full-size\"},Cards))),React.createElement(\"div\",{className:\"grid-card\"},React.createElement(\"div\",{className:\"left-padding full-size\"},React.createElement(\"span\",{className:\"card-title\"},\"TIDE\"),React.createElement(\"div\",{className:\"colour-card orange full-size\"},React.createElement(TideCard,{tide:this.state.tide})))))));}else{return React.createElement(\"div\",{className:\"error-modal\"},React.createElement(\"div\",{className:\"error-modal-inner\"},React.createElement(\"span\",{className:\"oops-error\"},\"Oops,\"),React.createElement(\"span\",null,\"Something went wrong. Try again?\"),React.createElement(\"button\",null,\"TRY AGAIN\")));}}}]);return HomeContent;}(Component);export default HomeContent;","map":{"version":3,"sources":["G:/JS/goring_wind/frontend/src/components/HomeContent/HomeContent.js"],"names":["React","Component","InteractiveWeather","WindCard","TideCard","Failure","HomeContent","props","state","wind","isLoaded","tide","failure","display","message","code","time","setState","setTimeout","displayError","getTideData","getWindData","setInterval","bind","t_wind","xhr","XMLHttpRequest","onload","status","data","JSON","parse","response","res","i","length","push","name","location","distance","speed","direction","bearing","position","lat","long","key","open","send","t_tide","console","log","Cards","map","row"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport './HomeContent.css'\r\n\r\n\r\nimport InteractiveWeather from './InteractiveWeather';\r\nimport WindCard from './WindCard';\r\nimport TideCard from './TideCard';\r\nimport Failure from '../Failure';\r\n// not used yet\r\n// import GenericDialog from '../../modals/genericDialog';\r\n\r\nclass HomeContent extends Component {\r\n\r\nconstructor(props){\r\n    super(props);\r\n\r\n    this.state = {\r\n        wind: null,\r\n        isLoaded: null,\r\n        tide: null,\r\n        failure: { \r\n            display: \"false\",\r\n            message: \"\",\r\n            code: \"\"\r\n        }\r\n        }\r\n    }\r\n\r\n    displayError(code, message, time) {\r\n        this.setState({failure: {display: \"true\", code: code, message: message}})\r\n        setTimeout(() => { this.setState({failure: {display: \"false\"}}) }, time);\r\n    }\r\n\r\n    componentDidMount() {  \r\n        this.displayError(\"0x00\", \"Any data presented is false during the development phase of this, do not use it for justification for kitesurfing\", 3000);\r\n        this.getTideData();     \r\n        this.getWindData();\r\n\r\n        // auto refress wind data\r\n        setInterval(this.getWindData.bind(this), 5000);\r\n    }\r\n\r\n    getWindData() {\r\n    const t_wind = [];\r\n    const xhr = new XMLHttpRequest();\r\n\r\n    xhr.onload = () => {\r\n        if (xhr.status === 200) {\r\n            var data = JSON.parse(xhr.response);\r\n            data = data.res;\r\n\r\n            for (var i = 0; i < data.length; i++) {\r\n                t_wind.push({\r\n                    name: data[i].name,\r\n                    location: data[i].location,\r\n                    distance: data[i].distance,\r\n                    speed: data[i].speed,\r\n                    direction: data[i].direction,\r\n                    bearing: data[i].bearing,\r\n                    position: [\r\n                        data[i].lat, data[i].long\r\n                    ],\r\n                    key: data[i].key\r\n                });\r\n            }\r\n\r\n            this.setState({\r\n                wind: t_wind,\r\n                isLoaded: true\r\n            });\r\n\r\n        } else {\r\n            // failed\r\n            this.displayError(\"0x01\", \"failed to retrieve wind data\", 5000);\r\n        }\r\n    };\r\n\r\n    xhr.open('POST', 'http://192.168.1.3:5000/weather/getCurrent?type=wind');\r\n\r\n    xhr.send();\r\n    }\r\n\r\n    getTideData() {\r\n        const t_tide = [];\r\n        const xhr = new XMLHttpRequest();\r\n    \r\n        xhr.onload = () => {\r\n            if (xhr.status === 200) {\r\n                var data = JSON.parse(xhr.response);\r\n                data = data.res;\r\n    \r\n                console.log(\"tide\");\r\n                console.log(data);\r\n                this.setState({\r\n                    tide: data\r\n                })\r\n    \r\n            } else {\r\n                // failed\r\n                this.displayError(\"0x01\", \"failed to retrieve tide data\", 5000);\r\n                console.log(\"tide failed\");\r\n            }\r\n        };\r\n    \r\n        xhr.open('POST', 'http://192.168.1.3:5000/weather/getCurrent?type=tide');\r\n    \r\n        xhr.send();\r\n    }\r\n\r\n    render(){\r\n        if (this.state.isLoaded) {    \r\n            var { wind ,tide} = this.state\r\n\r\n            var Cards = (                                    \r\n                wind.map((row) => {\r\n                    return (<WindCard StationName={row.name} StationLocation={row.location} StationDistance={row.distance} CurrentSpeed={row.speed} Direction={row.direction} Bearing={row.bearing} key={row.key}/>)\r\n                })\r\n            )\r\n\r\n\r\n        return (\r\n                    <main id=\"layout-container\">\r\n                        <Failure display={this.state.failure.display} code={this.state.failure.code} message={this.state.failure.message}/>\r\n                        <div id=\"content\">\r\n                            <div className=\"grid-container content-container\">\r\n                                <div className=\"grid-card\">\r\n                                    <div className=\"full-size\">\r\n                                        <span className=\"card-title\">INTERACTIVE WEATHER</span>\r\n                                        <div className=\"colour-card blue pale-blue-shadow full-size\">\r\n                                            <InteractiveWeather wind={this.state.wind} />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"grid-card\">\r\n                                    <div className=\"left-padding full-size\">\r\n                                        <span className=\"card-title\">WIND</span>\r\n                                        <div className=\"full-size\">\r\n                                            {Cards}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"grid-card\">\r\n                                <div className=\"left-padding full-size\">\r\n                                        <span className=\"card-title\">TIDE</span>\r\n                                        <div className=\"colour-card orange full-size\">\r\n                                            { <TideCard tide={this.state.tide} /> }\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </main>\r\n        )\r\n        } else {\r\n            return(\r\n              <div className=\"error-modal\">\r\n                  <div className=\"error-modal-inner\">\r\n                      <span className=\"oops-error\">Oops,</span>\r\n                      <span>Something went wrong. Try again?</span>\r\n                      <button>TRY AGAIN</button>\r\n                  </div>\r\n              </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport default HomeContent;"]},"metadata":{},"sourceType":"module"}